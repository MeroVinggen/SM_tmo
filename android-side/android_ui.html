<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screen Mirror</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
          background: #0f0f13;
          color: #e0e0e0;
          font-family: 'Segoe UI', sans-serif;
          display: flex;
          flex-direction: column;
          height: 100vh;
          align-items: center;
          justify-content: center;
          gap: 24px;
        }
        h1 { font-size: 22px; font-weight: 600; color: #fff; }
        #status-row {
          display: flex;
          align-items: center;
          gap: 10px;
        }
        #status-dot {
          width: 12px; height: 12px;
          border-radius: 50%;
          background: #555;
          transition: background 0.3s;
        }
        #status-dot.streaming { background: #3ddc84; box-shadow: 0 0 6px #3ddc84; }
        #status-dot.connected { background: #f0a500; }
        #status-text { font-size: 15px; color: #aaa; }
        select {
          background: #2a2a38;
          color: #e0e0e0;
          border: 1px solid #3a3a50;
          border-radius: 6px;
          padding: 10px 16px;
          font-size: 15px;
          width: 200px;
          outline: none;
        }
        button {
          width: 200px;
          padding: 12px;
          border-radius: 6px;
          border: none;
          font-size: 15px;
          font-weight: 600;
          cursor: pointer;
          background: #3ddc84;
          color: #0f0f13;
          transition: background 0.2s;
        }
        button.disconnect { background: #e85252; color: #fff; }
    </style>
</head>
<body>
<h1>ðŸ“± Screen Mirror</h1>
<div id="status-row">
    <div id="status-dot"></div>
    <span id="status-text">Idle</span>
</div>
<select id="res-select">
    <option value="480">480p</option>
    <option value="720" selected>720p</option>
    <option value="1080">1080p</option>
</select>
<button id="btn" onclick="toggle()">Connect</button>

<script>
    let connected = false;

    function toggle() {
      if (!connected) {
        const res = document.getElementById('res-select').value;
        Android.startCapture(res);
      } else {
        Android.stopCapture();
      }
    }

    function setStatus(status) {
      document.getElementById('status-dot').className = status;
      document.getElementById('status-text').textContent = status.charAt(0).toUpperCase() + status.slice(1);
      if (status === 'streaming') {
        connected = true;
        document.getElementById('btn').textContent = 'Disconnect';
        document.getElementById('btn').classList.add('disconnect');
        document.getElementById('res-select').disabled = true;
      } else if (status === 'idle') {
        connected = false;
        document.getElementById('btn').textContent = 'Connect';
        document.getElementById('btn').classList.remove('disconnect');
        document.getElementById('res-select').disabled = false;
      }
    }
</script>
</body>
</html>